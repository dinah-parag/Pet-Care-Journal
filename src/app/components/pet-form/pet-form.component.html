<div class="card-journal">
  <label>Para qual pet Ã© esta atualizaÃ§Ã£o?</label>
  <select [(ngModel)]="petSelecionadoId" (change)="onSelectChange()">
    <option value="" disabled>Escolha um pet...</option>
    <option *ngFor="let p of listaDePets" [value]="p.id">{{ p.nome }}</option>
    <option value="novo">â• ADICIONAR NOVO PET...</option>
  </select>

<div *ngIf="exibirFormNovoPet" class="sub-form">
  <h4>ğŸ“ {{ modoEdicao ? 'Editar Animal' : 'Novo Animal' }}</h4>

  <input [(ngModel)]="novoAnimal.nome" placeholder="Nome" />
  <select [(ngModel)]="novoAnimal.especie">
    <option value="Gato">Gato</option>
    <option value="Cachorro">Cachorro</option>
    <option value="Outro">Outro</option>
  </select>
  <input type="number" [(ngModel)]="novoAnimal.idade" placeholder="Idade" />

  <select [(ngModel)]="novoAnimal.sexo">
    <option value="Macho">Macho</option>
    <option value="FÃªmea">FÃªmea</option>
  </select>

  <div style="margin: 10px 0;">
    <label style="display: block; margin-bottom: 5px; font-size: 0.9rem;">Foto do Pet:</label>
    <input type="file" (change)="onFileSelected($event)" accept="image/*" />

    <img *ngIf="novoAnimal.imagemUrl" [src]="novoAnimal.imagemUrl"
         style="width: 60px; height: 60px; object-fit: cover; border-radius: 8px; margin-top: 10px; border: 2px solid #eee;">
  </div>

  <button (click)="modoEdicao ? atualizarPetExistente() : salvarPet()">
    {{ modoEdicao ? 'Salvar AlteraÃ§Ãµes' : 'Cadastrar Animal' }}
  </button>

  <button *ngIf="modoEdicao" (click)="cancelarEdicao()"
          style="background-color: #94a3b8; margin-top: 10px;">
    Cancelar
  </button>
</div>

  <div *ngIf="petSelecionadoId && !exibirFormNovoPet">
    <h4>ğŸ““ Registro DiÃ¡rio</h4>
    <select [(ngModel)]="novaEntrada.categoria">
      <option value="MedicaÃ§Ã£o">ğŸ’Š MedicaÃ§Ã£o</option>
      <option value="Banho">ğŸ§¼ Banho</option>
      <option value="AlimentaÃ§Ã£o">ğŸ½ï¸ AlimentaÃ§Ã£o</option>
      <option value="Customizado">âœ¨ Outro</option>
    </select>
    <input type="text" [(ngModel)]="novaEntrada.titulo" placeholder="Qual foi a reaÃ§Ã£o?/ O que aconteceu?" />
    <textarea [(ngModel)]="novaEntrada.comentario" placeholder="Detalhes..."></textarea>
    <button (click)="salvarNoDiario()">Salvar no DiÃ¡rio</button>
  </div>
</div>